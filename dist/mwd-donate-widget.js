console.log("mwd-donate-widget.js v18.7.2"),window.mwdspace=window.mwdspace||{},window.mwdspace.MFA_Funraise_Widget=function(a){var b=this;if(b.options="object"==typeof a?a:{},b.targetElement={},b.isStarted=!1,b.codeVersion="1.0.0",b.mainStylesUrl=window.location.protocol+"//services.mwdagency.com/donate-widget/1.0.0/css/mwd-donate-widget.css",b.mainHtmlUrl=window.location.protocol+"//services.mwdagency.com/donate-widget/1.0.0/mwd-donate-widget.html",console.log("window.mwdspace.MFA_Funraise_Widget",b.codeVersion),b.options.loadingText||(b.options.loadingText="One moment..."),!b.options.element)return console.warn("Invalid options - No target element:",b.options),!1;var c=document.querySelectorAll(b.options.element);return c?void(b.targetElement=c[0]):(console.warn("Specified target element not found:",b.options.element),!1)},window.mwdspace.MFA_Funraise_Widget.prototype.start=async function(){var a=this;if(a.isStarted)return void console.warn("window.mwdspace.MFA_Funraise_Widget already started");a.isStarted=!0,console.log("window.mwdspace.MFA_Funraise_Widget start()",a.options),a.targetElement.innerHTML="";var b=a.linkExternalStylesheet("https://use.fontawesome.com/releases/v5.1.0/css/all.css"),c=a.options.styleSheets||a.mainStylesUrl,d=a.linkExternalStylesheet(c);a.linkExternalStylesheet("https://cdnjs.cloudflare.com/ajax/libs/select2/4.0.6-rc.0/css/select2.min.css"),await Promise.all([b,d]);var e,f,g=a.loadFile(a.mainHtmlUrl),h=a.linkExternalScript(window.location.protocol+"//services.mwdagency.com/donate-widget/1.0.0/js/shared-utils.js");if([e,f]=await Promise.all([g,h]),!e)return void console.error("MFA_Funraise_Widget.start() - unable to load base HTML");console.warn("");var i=document.createElement("div");if(i.id="mfaDonationWidgetContainer",i.style.opacity=0,a.targetElement.appendChild(i),i.innerHTML=e,setTimeout(function(){i.className="reveal"},1),a.options.textOverride){var j={};if("string"==typeof a.options.textOverride)try{var k=await a.loadFile(a.options.textOverride);if(!k)return void console.error("MFA_Funraise_Widget.start() - unable to load text override data from file:",a.options.textOverride);j=window.mwdspace.sharedUtils.safeJsonParse(k)}catch(a){console.log("Caught error: ",a.message)}else j=a.options.textOverride;a.processTextOverride(j)}var l,m=a.linkExternalScript("https://core.spreedly.com/iframe/iframe-v1.min.js"),n=a.linkExternalScript("https://code.jquery.com/jquery-3.3.1.min.js");await Promise.all([m,n]);var o=a.linkExternalScript("https://cdnjs.cloudflare.com/ajax/libs/select2/4.0.6-rc.0/js/select2.min.js"),p=a.linkExternalScript(window.location.protocol+"//services.mwdagency.com/donate-widget/1.0.0/js/business-logic-layer.js"),q=a.linkExternalScript(window.location.protocol+"//services.mwdagency.com/donate-widget/1.0.0/js/transaction-system-layer.js");await Promise.all([p,q,o]),window.mwdspace.jquery=l?jQuery.noConflict():$||{},await a.linkExternalScript(window.location.protocol+"//services.mwdagency.com/donate-widget/1.0.0/js/user-interface-layer.js")},window.mwdspace.MFA_Funraise_Widget.prototype.linkExternalStylesheet=function(a){var b=this;return new Promise(function(c){console.log("linkExternalStylesheet() start:",a);var d=document.createElement("link");b.targetElement.appendChild(d),d.rel="stylesheet",d.type="text/css";var e=setTimeout(function(){console.log("linkExternalStylesheet() No result after 2s",a),c(!1)},2e3);d.addEventListener("load",function(){clearTimeout(e),console.log("linkExternalStylesheet() LOADED:",a),c(!0)}),d.addEventListener("error",function(b){console.error("linkExternalStylesheet() ERROR EVENT",a,b),c(!1)}),d.addEventListener("abort",function(b){console.warn("linkExternalStylesheet() ABORT EVENT",a,b),c(!1)}),d.href=encodeURI(a)})},window.mwdspace.MFA_Funraise_Widget.prototype.linkExternalScript=function(a){var b=this;return new Promise(function(c){console.log("linkExternalScript() start:",a);var d=document.createElement("script");b.targetElement.appendChild(d);var e=setTimeout(function(){console.log("linkExternalScript() No result after 2s",a),c(!1)},2e3);d.addEventListener("load",function(){clearTimeout(e),console.log("linkExternalScript() LOADED:",a),c(!0)}),d.addEventListener("error",function(b){clearTimeout(e),console.error("linkExternalScript() ERROR",a,b),c(!1)}),d.addEventListener("abort",function(b){clearTimeout(e),console.warn("linkExternalScript() ABORTED",a,b),c(!1)}),d.src=encodeURI(a)})},window.mwdspace.MFA_Funraise_Widget.prototype.loadFile=function(a){this;return new Promise(function(b){"undefined"==typeof a&&(console.warn("loadFile() given empty url"),b(null)),"string"!=typeof a&&(console.warn("loadFile() given invalid url type:",typeof a,a),b(null)),console.log("loadFile() start:",a);var c=encodeURI(a),d=new XMLHttpRequest;d.addEventListener("load",function(c){console.log(">> loadFile() LOADED:",a);var d=c.target.responseText||c.target.response||null;b(d)}),d.addEventListener("error",function(a){console.error("loadFile() ERROR EVENT",c,a),b(null)}),d.addEventListener("abort",function(a){console.warn("loadFile() ABORT EVENT",c,a),b(null)}),d.open("get",c,!0),d.send()})},window.mwdspace.MFA_Funraise_Widget.prototype.processTextOverride=function(a){var b=this;if("undefined"==typeof a)var a={};if("object"!=typeof a||!a)return console.log("MFA_Funraise_Widget.processTextOverride() given invalid object",typeof a),!1;console.warn("processTextOverride() input",a);var c;for(var d in a)if("object"==typeof a[d])for(var e in a[d])c=d+"."+e,b.setElementText(c,a[d][e])},window.mwdspace.MFA_Funraise_Widget.prototype.setElementText=function(a,b){console.warn("REPLACE",a,b);this;if("undefined"==typeof a)var a="";if(!a)return void console.warn("setElementText() given empty labelId");var c,d="[data-label-id=\""+a+"\"]",e=document.querySelectorAll(d);if(e)for(var f=0;f<e.length;f++)c=(e[f].tagName+"").toLowerCase(),console.warn(" >>",a,"=",c),"input"===c?e[f].setAttribute("placeholder",b):"label"===c||"span"===c||"h1"===c||"h2"===c||"h3"===c||"h4"===c||"h5"===c||"h6"===c||"p"===c?e[f].innerHTML=b:console.warn("setElementText(): Ignoring tag",a,c)};