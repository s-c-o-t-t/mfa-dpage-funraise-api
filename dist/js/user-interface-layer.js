console.log("user-interface-layer.js v18.6.15c"),window.mwdspace=window.mwdspace||{},"function"!=typeof window.mwdspace.jquery&&(console.error("jQuery (window.mwdspace.jquery) not found"),exit());var jq=window.mwdspace.jquery;console.log("Using jQuery version",jq.fn.jquery);var paymentTokenizerId="ODBm2idmYFT3pBge5qxRBjQaWH9",stepList=jq("div.giftFormContainer section.step"),domMainBackButton=jq("button.goPreviousStep");buildCurrencySelect(),buildPayMethodSelect(),buildFrequencyButtons(window.mwdspace.payMethodList[0].frequencies),buildCardExpireYearSelect(),showStep(),jq("input[type=radio]").change(function(){jq(this).closest("section").find("input[type=radio]").closest("label").removeClass("selected"),jq(this).closest("label").addClass("selected"),jq("div.giftFormHeaderContainer").slideDown(666)}),document.addEventListener("click",function(a){console.log("click",a.target.tagName,a.target.className);var b=jq(a.target).closest("button, .clickTarget");if(b)if(b.hasClass("processDonation")){if(window.mwdspace.donationInProgress)return alert("There's already a donation processing."),!1;var c=a.target.getAttribute("data-working");c&&jq(a.target).addClass("blocked").html(c);startDonation({amount:6.66},function(b){console.log("SUCCESS FUNCTION",b);var c=a.target.getAttribute("data-success");jq(a.target).removeClass("blocked").html(c)},function(b){console.log("FAIL FUNCTION",b);var c=a.target.getAttribute("data-error");jq(a.target).removeClass("blocked").addClass("error").html(c)})}else b.hasClass("goNextStep")&&showStep("payment")});function showStep(a){a=ensureString(a),a||(a=getSessionValue("currentStep"),!a&&(a="giftAmount")),jq("div.giftFormContainer div.loadingDisplay").hide();for(var b,c=0;c<stepList.length;c++)b=stepList[c].getAttribute("data-step-name"),b==a?("giftAmount"==b?domMainBackButton.hide():domMainBackButton.fadeIn(888),jq(stepList[c]).fadeIn(666)):jq(stepList[c]).hide()}function buildCurrencySelect(){try{if(!window.mwdspace.currencyList)throw new Error("List of valid currencies not found");var a=jq("form.mainGiftForm select[name=\"giftCurrency\"]");if(1!==a.length)throw new Error("Unable to identify the currency select dropdown");for(var b,c=0;c<window.mwdspace.currencyList.length;c++)b=buildCurrencyOption(window.mwdspace.currencyList[c]),b?a.append(b):console.warn("Unable to add currency:",window.mwdspace.currencyList[c])}catch(a){console.error("Unable to build the currency select dropdown",a)}}function buildCurrencyOption(a){var b=null;try{a.code&&(b=document.createElement("option"),b.setAttribute("value",a.code),b.innerText=a.code+" "+(a.name||""))}catch(b){console.error("Unable to build the option element for currency:",a)}return b}function buildPayMethodSelect(){try{if(!window.mwdspace.payMethodList)throw new Error("List of valid payment methods not found");var a=jq("form.mainGiftForm select[name=\"payMethod\"]");if(1!==a.length)throw new Error("Unable to identify the payment method select dropdown");for(var b,c=0;c<window.mwdspace.payMethodList.length;c++)b=buildPayMethodOption(window.mwdspace.payMethodList[c]),b?a.append(b):console.warn("Unable to add payment method:",window.mwdspace.payMethodList[c])}catch(a){console.error("Unable to build the payment method select dropdown",a)}}function buildPayMethodOption(a){var b=null;try{a.code&&(b=document.createElement("option"),b.setAttribute("value",a.code),b.innerText=a.description||"")}catch(a){console.error("Unable to build the option element for currency:",currency)}return b}function buildFrequencyButtons(a){try{if(!a||1>a.length)throw new Error("Invalid list of frequencies given");var b=jq("form.mainGiftForm div.giftFrequencyContainer");if(1!==b.length)throw new Error("Unable to identify the frequency select dropdown");b.find("div.giftOption").remove();for(var c,d=0;d<a.length;d++)c=buildFrequencyButton(a[d]),c?b.append(c):console.warn("Unable to add frequency:",a[d])}catch(a){console.error("Unable to build the frequency buttons",a)}}function buildFrequencyButton(a){var b=null;try{if(a.code){b=document.createElement("div"),jq(b).addClass("giftOption fixed");var c=document.createElement("label");jq(c).addClass("giftOption"),c.innerText=a.name||"Unknown",b.appendChild(c);var d=document.createElement("input");d.setAttribute("type","radio"),d.setAttribute("name","giftFrequency"),d.setAttribute("value",a.code),c.appendChild(d)}}catch(b){console.error("Error building the button for frequency:",a,b)}return b}function buildCardExpireYearSelect(){try{var a=new Date;a.setDate(a.getDate()-7);var b=a.getFullYear(),c=jq("form.mainGiftForm select[name=\"payCardExpireYear\"]");if(1!==c.length)throw new Error("Unable to identify the card expire year select dropdown");for(var d,e=b;e<b+15;e++)d=buildCardExpireYearOption(e),d?c.append(d):console.warn("Unable to add card expire year:",e)}catch(a){console.error("Unable to build the card expire year select dropdown",a)}}function buildCardExpireYearOption(a){var b=null;try{a&&(b=document.createElement("option"),b.setAttribute("value",a.code),b.innerText=a)}catch(a){console.error("Unable to build the option element for currency:",currency)}return b}