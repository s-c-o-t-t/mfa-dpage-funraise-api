console.log("user-interface-layer.js v18.6.13a");var paymentTokenizerId="ODBm2idmYFT3pBge5qxRBjQaWH9",stepList=document.querySelectorAll("div.giftFormContainer section.step"),domMainBackButton=document.querySelector("button.goPreviousStep");buildCurrencySelect(),buildPayMethodSelect(),buildFrequencyButtons(window.mwdspace.payMethodList[0].frequencies),buildCardExpireYearSelect(),showStep(),$("input[type=radio]").change(function(){$(this).closest("section").find("input[type=radio]").closest("label").removeClass("selected"),$(this).closest("label").addClass("selected"),$("div.giftFormHeaderContainer").slideDown(666)}),document.addEventListener("click",function(a){console.log("click",a.target.tagName,a.target.className);var b=$(a.target).closest("button, .clickTarget");if(b)if(b.hasClass("processDonation")){if(window.mwdspace.donationInProgress)return alert("There's already a donation processing."),!1;var c=a.target.getAttribute("data-working");c&&(a.target.classList.add("blocked"),a.target.innerHTML=c);startDonation({amount:6.66},function(b){console.log("SUCCESS FUNCTION",b);var c=a.target.getAttribute("data-success");a.target.classList.remove("blocked"),a.target.innerHTML=c},function(b){console.log("FAIL FUNCTION",b);var c=a.target.getAttribute("data-error");a.target.classList.remove("blocked"),a.target.classList.add("error"),a.target.innerHTML=c})}else b.hasClass("goNextStep")&&showStep("payment")});function showStep(a){a=ensureString(a),a||(a=getSessionValue("currentStep"),!a&&(a="giftAmount")),$("div.giftFormContainer div.loadingDisplay").hide();for(var b,c=0;c<stepList.length;c++)b=stepList[c].getAttribute("data-step-name"),b==a?("giftAmount"==b?$(domMainBackButton).hide():$(domMainBackButton).fadeIn(888),$(stepList[c]).fadeIn(666)):$(stepList[c]).hide()}function buildCurrencySelect(){try{if(!window.mwdspace.currencyList)throw new Error("List of valid currencies not found");var a=document.querySelector("form.mainGiftForm select[name=giftCurrency]");if(!a)throw new Error("Unable to identify the currency select dropdown");for(var b,c=0;c<window.mwdspace.currencyList.length;c++)b=buildCurrencyOption(window.mwdspace.currencyList[c]),b?a.appendChild(b):console.warn("Unable to add currency:",window.mwdspace.currencyList[c])}catch(a){console.error("Unable to build the currency select dropdown",a)}}function buildCurrencyOption(a){var b=null;try{a.code&&(b=document.createElement("option"),b.setAttribute("value",a.code),b.innerText=a.code+" "+(a.name||""))}catch(b){console.error("Unable to build the option element for currency:",a)}return b}function buildPayMethodSelect(){try{if(!window.mwdspace.payMethodList)throw new Error("List of valid payment methods not found");var a=document.querySelector("form.mainGiftForm select[name=payMethod]");if(!a)throw new Error("Unable to identify the payment method select dropdown");for(var b,c=0;c<window.mwdspace.payMethodList.length;c++)b=buildPayMethodOption(window.mwdspace.payMethodList[c]),b?a.appendChild(b):console.warn("Unable to add payment method:",window.mwdspace.payMethodList[c])}catch(a){console.error("Unable to build the payment method select dropdown",a)}}function buildPayMethodOption(a){var b=null;try{a.code&&(b=document.createElement("option"),b.setAttribute("value",a.code),b.innerText=a.description||"")}catch(a){console.error("Unable to build the option element for currency:",currency)}return b}function buildFrequencyButtons(a){try{if(!a)throw new Error("Invalid list of frequencies given");var b=document.querySelector("form.mainGiftForm div.giftFrequencyContainer");if(!b)throw new Error("Unable to identify the frequency select dropdown");for(var c=b.querySelectorAll("div.giftOption"),d=0;d<c.length;d++)c[d].remove();for(var e,d=0;d<a.length;d++)e=buildFrequencyButton(a[d]),e?b.append(e):console.warn("Unable to add frequency:",a[d])}catch(a){console.error("Unable to build the frequency buttons",a)}}function buildFrequencyButton(a){var b=null;try{if(a.code){b=document.createElement("div"),b.classList.add("giftOption"),b.classList.add("fixed");var c=document.createElement("label");c.classList.add("giftOption"),c.innerText=a.name||"Unknown",b.appendChild(c);var d=document.createElement("input");d.setAttribute("type","radio"),d.setAttribute("name","giftFrequency"),d.setAttribute("value",a.code),c.appendChild(d)}}catch(b){console.error("Error building the button for frequency:",a,b)}return b}function buildCardExpireYearSelect(){try{var a=new Date;a.setDate(a.getDate()-7);var b=a.getFullYear(),c=document.querySelector("form.mainGiftForm select[name=payCardExpireYear]");if(!c)throw new Error("Unable to identify the card expire year select dropdown");for(var d,e=b;e<b+15;e++)d=buildCardExpireYearOption(e),d?c.appendChild(d):console.warn("Unable to add card expire year:",e)}catch(a){console.error("Unable to build the card expire year select dropdown",a)}}function buildCardExpireYearOption(a){var b=null;try{a&&(b=document.createElement("option"),b.setAttribute("value",a.code),b.innerText=a)}catch(a){console.error("Unable to build the option element for currency:",currency)}return b}