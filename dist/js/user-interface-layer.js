console.log("user-interface-layer.js v18.6.15c"),window.mwdspace=window.mwdspace||{},"function"!=typeof window.mwdspace.jquery&&(console.error("jQuery (window.mwdspace.jquery) not found"),exit());var jq=window.mwdspace.jquery;console.log("Using jQuery version",jq.fn.jquery);var paymentTokenizerId="ODBm2idmYFT3pBge5qxRBjQaWH9",stepList=jq("div.giftFormContainer section.step"),domMainBackButton=jq("button.goPreviousStep");buildCurrencySelect(),buildPayMethodSelect(),buildFrequencyButtons(window.mwdspace.validPayMethodList[0].frequencies),buildCardExpireMonthSelect(),buildCardExpireYearSelect(),showStep(),jq("input[type=radio]").change(function(){jq(this).closest("section").find("input[type=radio]").closest("label").removeClass("selected"),jq(this).closest("label").addClass("selected"),jq("div.giftFormHeaderContainer").slideDown(666)}),document.addEventListener("click",function(a){console.log("click",a.target.tagName,a.target.className);var b=jq(a.target).closest("button, clickTarget");if(b)if(b.hasClass("processDonation")){if(window.mwdspace.donationInProgress)return alert("There's already a donation processing."),!1;var c=a.target.getAttribute("data-working");c&&jq(a.target).addClass("blocked").html(c);startDonation({amount:6.66},function(b){console.log("SUCCESS FUNCTION",b);var c=a.target.getAttribute("data-success");jq(a.target).removeClass("blocked").html(c)},function(b){console.log("FAIL FUNCTION",b);var c=a.target.getAttribute("data-error");jq(a.target).removeClass("blocked").addClass("error").html(c)})}else b.hasClass("goNextStep")?showNextStep():b.hasClass("goPreviousStep")&&showPreviousStep()});function showNextStep(){switch(mwdspace.currentStepName){case"giftAmount":showStep("donorInfo");break;case"donorInfo":showStep("payment");}}function showPreviousStep(){switch(mwdspace.currentStepName){case"donorInfo":showStep("giftAmount");break;case"payment":showStep("donorInfo");}}function showStep(a){mwdspace.currentStepName="",a=ensureString(a),a||(a=getSessionValue("savedStepName"),!a&&(a="giftAmount")),jq("div.giftFormContainer div.loadingDisplay").hide();for(var b,c=0;c<stepList.length;c++)b=stepList[c].getAttribute("data-step-name"),b==a?(0==c?domMainBackButton.hide():domMainBackButton.fadeIn(888),jq(stepList[c]).fadeIn(666),mwdspace.currentStepName=b,setSessionValue("savedStepName",b)):jq(stepList[c]).hide()}function buildCurrencySelect(){try{if(!window.mwdspace.validCurrencyList)throw new Error("List of valid currencies not found");var a=jq("form.mainGiftForm select[name=\"giftCurrency\"]");if(1!==a.length)throw new Error("Unable to identify the currency select dropdown");for(var b,c=0;c<window.mwdspace.validCurrencyList.length;c++)b=buildCurrencyOption(window.mwdspace.validCurrencyList[c]),b?a.append(b):console.warn("Unable to add currency:",window.mwdspace.validCurrencyList[c])}catch(a){console.error("Unable to build the currency select dropdown",a)}}function buildCurrencyOption(a){var b=null;try{a.code&&(b=document.createElement("option"),b.setAttribute("value",a.code),b.innerText=a.code+" "+(a.name||""))}catch(b){console.error("Unable to build the option element for currency:",a)}return b}function buildPayMethodSelect(){try{if(!window.mwdspace.validPayMethodList)throw new Error("List of valid payment methods not found");var a=jq("form.mainGiftForm select[name=\"payMethod\"]");if(1!==a.length)throw new Error("Unable to identify the payment method select dropdown");for(var b,c=0;c<window.mwdspace.validPayMethodList.length;c++)b=buildPayMethodOption(window.mwdspace.validPayMethodList[c]),b?a.append(b):console.warn("Unable to add payment method:",window.mwdspace.validPayMethodList[c])}catch(a){console.error("Unable to build the payment method select dropdown",a)}}function buildPayMethodOption(a){var b=null;try{a.code&&(b=document.createElement("option"),b.setAttribute("value",a.code),b.innerText=a.description||"")}catch(b){console.error("Unable to build the option element for method:",a)}return b}function buildFrequencyButtons(a){try{if(!a||1>a.length)throw new Error("Invalid list of frequencies given");var b=jq("form.mainGiftForm div.giftFrequencyContainer");if(1!==b.length)throw new Error("Unable to identify the frequency select dropdown");b.find("div.giftOption").remove();for(var c,d=0;d<a.length;d++)c=buildFrequencyButton(a[d]),c?b.append(c):console.warn("Unable to add frequency:",a[d])}catch(a){console.error("Unable to build the frequency buttons",a)}}function buildFrequencyButton(a){var b=null;try{if(a.code){b=document.createElement("div"),jq(b).addClass("giftOption fixed");var c=document.createElement("label");jq(c).addClass("giftOption"),c.innerText=a.name||"Unknown",b.appendChild(c);var d=document.createElement("input");d.setAttribute("type","radio"),d.setAttribute("name","giftFrequency"),d.setAttribute("value",a.code),c.appendChild(d)}}catch(b){console.error("Error building the button for frequency:",a,b)}return b}function buildCardExpireMonthSelect(){try{var a=jq("form.mainGiftForm select[name=\"payCardExpireMonth\"]");if(1!==a.length)throw new Error("Unable to identify the card expire month select dropdown");var b=buildCardExpireMonthOption("Month");a.append(b);for(var c=1;12>=c;c++)b=buildCardExpireMonthOption(c),b?a.append(b):console.warn("Unable to add card expire month:",c)}catch(a){console.error("Unable to build the card expire month select dropdown",a)}}function buildCardExpireMonthOption(a,b){var c=null;try{if("number"!=typeof a&&"string"!=typeof a&&!a)console.error("Invalid month given:",a);else{if("undefined"==typeof b)var b=a;c=document.createElement("option"),c.setAttribute("value",b),c.innerText=a}}catch(b){console.error("Unable to build the option element for month:",a)}return c}function buildCardExpireYearSelect(){try{var a=new Date;a.setDate(a.getDate()-7);var b=a.getFullYear(),c=jq("form.mainGiftForm select[name=\"payCardExpireYear\"]");if(1!==c.length)throw new Error("Unable to identify the card expire year select dropdown");var d=buildCardExpireYearOption("Year");c.append(d);for(var e=b;e<b+15;e++)d=buildCardExpireYearOption(e),d?c.append(d):console.warn("Unable to add card expire year:",e)}catch(a){console.error("Unable to build the card expire year select dropdown",a)}}function buildCardExpireYearOption(a,b){var c=null;try{if("number"!=typeof a&&"string"!=typeof a&&!a)console.error("Invalid year given:",a);else{if("undefined"==typeof b)var b=a;c=document.createElement("option"),c.setAttribute("value",b),c.innerText=a}}catch(b){console.error("Unable to build the option element for year:",a)}return c}