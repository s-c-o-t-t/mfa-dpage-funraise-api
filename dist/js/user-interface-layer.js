(function(){function a(){switch(mwdspace.currentStepName){case"giftAmount":c("donorInfo");break;case"donorInfo":c("payment");}}function b(){switch(mwdspace.currentStepName){case"donorInfo":c("giftAmount");break;case"payment":c("donorInfo");}}function c(a){mwdspace.currentStepName="",a=window.mwdspace.sharedUtils.ensureString(a),a||(a=window.mwdspace.sharedUtils.getSessionValue("savedStepName"),!a&&(a="giftAmount")),j("div.giftFormContainer div.loadingDisplay").hide();for(var b,c=0;c<k.length;c++)b=k[c].getAttribute("data-step-name"),b==a?(0==c?l.hide():(j("div.giftFormHeaderContainer").show(),l.fadeIn(888)),j(k[c]).fadeIn(666,function(){i(j("div.giftFormContainer"))}),mwdspace.currentStepName=b,window.mwdspace.sharedUtils.setSessionValue("savedStepName",b)):j(k[c]).hide()}function d(a){var b=null;try{a.code&&(b=document.createElement("option"),b.setAttribute("value",a.code),b.innerText=a.code+" "+(a.name||""))}catch(b){console.error("Unable to build the option element for currency:",a)}return b}function e(a){var b=null;try{a.code&&(b=document.createElement("option"),b.setAttribute("value",a.code),b.innerText=a.description||"")}catch(b){console.error("Unable to build the option element for method:",a)}return b}function f(a){var b=null;try{if(a.code){b=document.createElement("div"),j(b).addClass("giftOption fixed");var c=document.createElement("label");j(c).addClass("giftOption"),c.innerText=a.name||"Unknown",b.appendChild(c);var d=document.createElement("input");d.setAttribute("type","radio"),d.setAttribute("name","giftFrequency"),d.setAttribute("value",a.code),c.appendChild(d)}}catch(b){console.error("Error building the button for frequency:",a,b)}return b}function g(a,b){var c=null;try{if("number"!=typeof a&&"string"!=typeof a&&!a)console.error("Invalid month given:",a);else{if("undefined"==typeof b)var b=a;try{a=window.mwdspace.sharedUtils.ensureString(a),a=a.padStart(2,"0")}catch(a){}c=document.createElement("option"),c.setAttribute("value",b),c.innerText=a}}catch(b){console.error("Unable to build the option element for month:",a)}return c}function h(a,b){var c=null;try{if("number"!=typeof a&&"string"!=typeof a&&!a)console.error("Invalid year given:",a);else{if("undefined"==typeof b)var b=a;c=document.createElement("option"),c.setAttribute("value",b),c.innerText=a}}catch(b){console.error("Unable to build the option element for year:",a)}return c}function i(a){a=j(a);var b=j(window).scrollTop(),c=j(window).height(),d=b,e=(a.outerHeight()-a.innerHeight())/2;e=0>=e?4:e;var f=a.offset().top+e,g=f+a.innerHeight();return a.innerHeight()>c?void j("html,body").animate({scrollTop:f,easing:"ease"},999):d>f?void j("html,body").animate({scrollTop:f,easing:"ease"},999):void(d+c<g&&j("html,body").animate({scrollTop:g-c+e,easing:"ease"},999))}console.log("user-interface-layer.js v18.6.26a"),window.mwdspace=window.mwdspace||{},"function"!=typeof window.mwdspace.jquery&&(console.error("jQuery (window.mwdspace.jquery) not found"),exit());var j=window.mwdspace.jquery;console.log("Using jQuery version",j.fn.jquery);window.mwdspace.defaultGiftList=[25,50,75,100];var k=j("div.giftFormContainer section.step"),l=j("button.goPreviousStep");(function(){try{if(!window.mwdspace.validCurrencyList)throw new Error("List of valid currencies not found");var a=j("form.mainGiftForm select[name=\"giftCurrency\"]");if(1!==a.length)throw new Error("Unable to identify the currency select dropdown");for(var b,c=0;c<window.mwdspace.validCurrencyList.length;c++)b=d(window.mwdspace.validCurrencyList[c]),b?a.append(b):console.warn("Unable to add currency:",window.mwdspace.validCurrencyList[c])}catch(a){console.error("Unable to build the currency select dropdown",a)}})(),function(){try{if(!window.mwdspace.validPayMethodList)throw new Error("List of valid payment methods not found");var a=j("form.mainGiftForm select[name=\"payMethod\"]");if(1!==a.length)throw new Error("Unable to identify the payment method select dropdown");for(var b,c=0;c<window.mwdspace.validPayMethodList.length;c++)b=e(window.mwdspace.validPayMethodList[c]),b?a.append(b):console.warn("Unable to add payment method:",window.mwdspace.validPayMethodList[c])}catch(a){console.error("Unable to build the payment method select dropdown",a)}}(),function(a){try{if(!a||1>a.length)throw new Error("Invalid list of frequencies given");var b=j("form.mainGiftForm div.giftFrequencyContainer");if(1!==b.length)throw new Error("Unable to identify the frequency select dropdown");b.find("div.giftOption").remove();for(var c,d=0;d<a.length;d++)c=f(a[d]),c?b.append(c):console.warn("Unable to add frequency:",a[d])}catch(a){console.error("Unable to build the frequency buttons",a)}}(window.mwdspace.validPayMethodList[0].frequencies),function(){try{var a=j("form.mainGiftForm select[name=\"payCardExpireMonth\"]");if(1!==a.length)throw new Error("Unable to identify the card expire month select dropdown");var b=g("Month","");a.append(b);for(var c=1;12>=c;c++)b=g(c),b?a.append(b):console.warn("Unable to add card expire month:",c)}catch(a){console.error("Unable to build the card expire month select dropdown",a)}}(),function(){try{var a=new Date;a.setDate(a.getDate()-7);var b=a.getFullYear(),c=j("form.mainGiftForm select[name=\"payCardExpireYear\"]");if(1!==c.length)throw new Error("Unable to identify the card expire year select dropdown");var d=h("Year","");c.append(d);for(var e=b;e<b+15;e++)d=h(e),d?c.append(d):console.warn("Unable to add card expire year:",e)}catch(a){console.error("Unable to build the card expire year select dropdown",a)}}(),c(),j("input[type=radio]").change(function(){j(this).closest("section").find("input[type=radio]").closest("label").removeClass("selected"),j(this).closest("label").addClass("selected"),j("div.giftFormHeaderContainer").slideDown(666,function(){i(j("div.giftFormContainer"))})}),document.addEventListener("click",function(c){console.log("click",c.target.tagName,c.target.className);var d=j(c.target).closest("button, clickTarget");if(d)if(d.hasClass("processDonation")){if(window.mwdspace.donationInProgress)return alert("There's already a donation processing."),!1;var e=c.target.getAttribute("data-working");e&&j(c.target).addClass("blocked").html(e);startDonation({amount:6.66},function(a){console.log("SUCCESS FUNCTION",a);var b=c.target.getAttribute("data-success");j(c.target).removeClass("blocked").html(b)},function(a){console.log("FAIL FUNCTION",a);var b=c.target.getAttribute("data-error");j(c.target).removeClass("blocked").addClass("error").html(b)})}else d.hasClass("goNextStep")?a():d.hasClass("goPreviousStep")&&b()})})();